(this["webpackJsonpdrag-n-drop"]=this["webpackJsonpdrag-n-drop"]||[]).push([[0],{12:function(e,t,a){e.exports=a(20)},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),s=a.n(i),o=a(7),d=a(1),l=a(2),c=a(4),u=a(3),g=a(5),p=a(6),m=a.n(p),f=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=[],t=0;return this.props.activeImages.forEach((function(a){e.push(r.a.createElement("li",{key:a.name+t},a.name)),t++})),r.a.createElement("ul",{className:"images-list"},e)}}]),t}(r.a.Component),h=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=[],t=1;return this.props.activeImages.forEach((function(a){e.push(r.a.createElement("figure",{"data-x-offset":"0","data-y-offset":"0",draggable:"true",key:a.name+t,style:{backgroundImage:"url(".concat(a.url,")"),top:"".concat(a.topOffset,"px"),left:"".concat(a.leftOffset,"px"),zIndex:t},className:"playground__image"})),t++})),r.a.createElement("div",{className:"playground",ref:"{this.props.innerRef}"},e)}},{key:"componentDidUpdate",value:function(){var e=this.props.playgroundWidth,t=this.props.playgroundHeight,a=document.querySelector(".playground");a.addEventListener("mousedown",(function(e){"playground__image"===e.target.className&&(e.target.setAttribute("data-active","true"),e.target.setAttribute("data-initial-x",e.clientX-e.target.getAttribute("data-x-offset")),e.target.setAttribute("data-initial-y",e.clientY-e.target.getAttribute("data-y-offset")))}),!1),a.addEventListener("mouseup",(function(e){e.target.setAttribute("data-initial-x",e.target.getAttribute("data-current-x")),e.target.setAttribute("data-initial-y",e.target.getAttribute("data-current-y")),e.target.setAttribute("data-active","false")}),!1),a.addEventListener("mousemove",(function(a){"true"===a.target.getAttribute("data-active")&&(a.preventDefault(),a.target.setAttribute("data-current-x",a.clientX-a.target.getAttribute("data-initial-x")),a.target.setAttribute("data-current-y",a.clientY-a.target.getAttribute("data-initial-y")),a.target.setAttribute("data-x-offset",a.target.getAttribute("data-current-x")),a.target.setAttribute("data-y-offset",a.target.getAttribute("data-current-y")),n=a.target.getAttribute("data-current-x"),r=a.target.getAttribute("data-current-y"),i=a.target,parseInt(i.style.left,10)+parseInt(n,10)>=0&&parseInt(i.style.left,10)+parseInt(n,10)<=e&&parseInt(i.style.top,10)+parseInt(r,10)>=0&&parseInt(i.style.top,10)+parseInt(r,10)<=t&&(i.style.transform="translate3d("+n+"px, "+r+"px, 0)"));var n,r,i}),!1)}}]),t}(r.a.Component),v=r.a.forwardRef((function(e,t){return r.a.createElement("div",{ref:t,className:"playground-container"},r.a.createElement(h,e))})),b=(a(19),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).activateAllImages=function(){e.setState((function(e){return{pendingImages:new Set,activeImages:new Set([].concat(Object(o.a)(e.activeImages),Object(o.a)(e.pendingImages)))}}))},e.uploadFileHandler=function(t){void 0!==t&&(t.size>1048576?m()("The image exceedes the size limit (1MB)"):e.state.activeImages.size+e.state.pendingImages.size!==10?e.setState((function(e){return{imageIsAboveDropzone:!1,pendingImages:e.pendingImages.add({name:t.name,url:URL.createObjectURL(t),leftOffset:Math.floor(Math.random()*(e.playgroundWidth-e.photoSize+1)),topOffset:Math.floor(Math.random()*(e.playgroundHeight-e.photoSize+1))})}})):m()("The maximum amount of images is uploaded (10)"))},e.dragHandler=function(t){switch(t.persist(),t.stopPropagation(),t.preventDefault(),t.type){case"dragenter":case"dragover":t.target.matches(".upload")?e.setState({imageIsAboveDropzone:!0}):e.setState({imageIsAboveDropzone:!1});break;case"dragleave":e.setState({imageIsAboveDropzone:!1});break;case"drop":t.target.matches(".upload")&&e.uploadFileHandler(t.dataTransfer.files[0])}return!1},e.uploadBtnHandler=function(t){t.persist(),e.uploadFileHandler(t.nativeEvent.srcElement.files[0])},e.uploadClick=function(){e.fileBtnRef.current.click()},e.state={imageIsAboveDropzone:!1,activeImages:new Set,pendingImages:new Set,photoSize:200,playgroundWidth:760,playgroundHeight:300},e.playgroundRef=r.a.createRef(),e.fileBtnRef=r.a.createRef(),e}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("main",{className:"main"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"upload images",r.a.createElement("br",null),"drag them around on a playground")),r.a.createElement("div",{className:"inner"},r.a.createElement("div",{onDragEnter:this.dragHandler,onDragLeave:this.dragHandler,onDrop:this.dragHandler,className:this.state.imageIsAboveDropzone?"upload upload--drag-enter":"upload"},r.a.createElement("button",{onClick:this.uploadClick,className:"upload__btn"},"select an image"),r.a.createElement("span",{className:"upload__divider"},"or"),r.a.createElement("p",{className:"upload__drop"},"drop it here"),r.a.createElement("input",{type:"file",className:"upload__hidden-btn",accept:"image/*",onChange:this.uploadBtnHandler,ref:this.fileBtnRef})),r.a.createElement("div",{className:0===this.state.activeImages.size?"images-list-container images-list-container--pending":"images-list-container"},r.a.createElement("header",{className:"images-list-header"},"images list"),r.a.createElement(f,{activeImages:this.state.activeImages}))),r.a.createElement("button",{className:0===this.state.pendingImages.size?"add-to-playground add-to-playground--pending":"add-to-playground",onClick:this.activateAllImages},"add ",this.state.pendingImages.size," ",1===this.state.pendingImages.size?"image":"images"," ","to the playground"),r.a.createElement(v,{activeImages:this.state.activeImages,ref:this.playgroundRef,playgroundWidth:this.state.playgroundWidth,playgroundHeight:this.state.playgroundHeight}))}},{key:"componentDidMount",value:function(){var e=function(e){e.preventDefault()};window.addEventListener("dragenter",e),window.addEventListener("dragover",e),window.addEventListener("drop",e)}}]),t}(r.a.Component));s.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.793787be.chunk.js.map