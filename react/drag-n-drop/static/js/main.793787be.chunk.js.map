{"version":3,"sources":["components/ImagesList.js","components/Playground.js","Game.js","index.js"],"names":["ImagesList","listItems","index","this","props","activeImages","forEach","image","push","key","name","className","React","Component","PlaygroundComponent","images","data-x-offset","data-y-offset","draggable","style","backgroundImage","url","top","topOffset","left","leftOffset","zIndex","ref","playgroundWidth","playgroundHeight","playground","document","querySelector","addEventListener","e","target","setAttribute","clientX","getAttribute","clientY","preventDefault","xPos","yPos","el","parseInt","transform","Playground","forwardRef","Game","activateAllImages","setState","state","pendingImages","Set","uploadFileHandler","file","undefined","size","swal","imageIsAboveDropzone","add","URL","createObjectURL","Math","floor","random","photoSize","dragHandler","event","persist","stopPropagation","type","matches","dataTransfer","files","uploadBtnHandler","nativeEvent","srcElement","uploadClick","fileBtnRef","current","click","playgroundRef","createRef","onDragEnter","onDragLeave","onDrop","onClick","accept","onChange","preventDefaultAction","window","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.793787be.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nclass ImagesList extends React.Component {\r\n\trender() {\r\n\t\tlet listItems = [];\r\n\t\tlet index = 0;\r\n\t\tthis.props.activeImages.forEach(image => {\r\n\t\t\tlistItems.push(<li key={image.name + index}>{image.name}</li>);\r\n\t\t\tindex++;\r\n\t\t});\r\n\t\treturn <ul className='images-list'>{listItems}</ul>;\r\n\t}\r\n}\r\n\r\nexport default ImagesList;\r\n","import React from 'react';\r\n\r\nclass PlaygroundComponent extends React.Component {\r\n\trender() {\r\n\t\tlet images = [];\r\n\t\tlet index = 1;\r\n\t\tthis.props.activeImages.forEach(image => {\r\n\t\t\timages.push(\r\n\t\t\t\t<figure\r\n\t\t\t\t\tdata-x-offset='0'\r\n\t\t\t\t\tdata-y-offset='0'\r\n\t\t\t\t\tdraggable='true'\r\n\t\t\t\t\tkey={image.name + index}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundImage: `url(${image.url})`,\r\n\t\t\t\t\t\ttop: `${image.topOffset}px`,\r\n\t\t\t\t\t\tleft: `${image.leftOffset}px`,\r\n\t\t\t\t\t\tzIndex: index\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='playground__image'\r\n\t\t\t\t></figure>\r\n\t\t\t);\r\n\t\t\tindex++;\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<div className='playground' ref='{this.props.innerRef}'>\r\n\t\t\t\t{images}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tconst playgroundWidth = this.props.playgroundWidth;\r\n\t\tconst playgroundHeight = this.props.playgroundHeight;\r\n\t\tconst playground = document.querySelector('.playground');\r\n\r\n\t\tplayground.addEventListener('mousedown', dragStart, false);\r\n\t\tplayground.addEventListener('mouseup', dragEnd, false);\r\n\t\tplayground.addEventListener('mousemove', drag, false);\r\n\r\n\t\tfunction dragStart(e) {\r\n\t\t\tif (e.target.className === 'playground__image') {\r\n\t\t\t\te.target.setAttribute('data-active', 'true');\r\n\t\t\t\te.target.setAttribute(\r\n\t\t\t\t\t'data-initial-x',\r\n\t\t\t\t\te.clientX - e.target.getAttribute('data-x-offset')\r\n\t\t\t\t);\r\n\t\t\t\te.target.setAttribute(\r\n\t\t\t\t\t'data-initial-y',\r\n\t\t\t\t\te.clientY - e.target.getAttribute('data-y-offset')\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction dragEnd(e) {\r\n\t\t\te.target.setAttribute(\r\n\t\t\t\t'data-initial-x',\r\n\t\t\t\te.target.getAttribute('data-current-x')\r\n\t\t\t);\r\n\t\t\te.target.setAttribute(\r\n\t\t\t\t'data-initial-y',\r\n\t\t\t\te.target.getAttribute('data-current-y')\r\n\t\t\t);\r\n\t\t\te.target.setAttribute('data-active', 'false');\r\n\t\t}\r\n\r\n\t\tfunction drag(e) {\r\n\t\t\tif (e.target.getAttribute('data-active') === 'true') {\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\te.target.setAttribute(\r\n\t\t\t\t\t'data-current-x',\r\n\t\t\t\t\te.clientX - e.target.getAttribute('data-initial-x')\r\n\t\t\t\t);\r\n\t\t\t\te.target.setAttribute(\r\n\t\t\t\t\t'data-current-y',\r\n\t\t\t\t\te.clientY - e.target.getAttribute('data-initial-y')\r\n\t\t\t\t);\r\n\r\n\t\t\t\te.target.setAttribute(\r\n\t\t\t\t\t'data-x-offset',\r\n\t\t\t\t\te.target.getAttribute('data-current-x')\r\n\t\t\t\t);\r\n\t\t\t\te.target.setAttribute(\r\n\t\t\t\t\t'data-y-offset',\r\n\t\t\t\t\te.target.getAttribute('data-current-y')\r\n\t\t\t\t);\r\n\r\n\t\t\t\tsetTranslate(\r\n\t\t\t\t\te.target.getAttribute('data-current-x'),\r\n\t\t\t\t\te.target.getAttribute('data-current-y'),\r\n\t\t\t\t\te.target\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction setTranslate(xPos, yPos, el) {\r\n\t\t\tif (\r\n\t\t\t\tparseInt(el.style.left, 10) + parseInt(xPos, 10) >= 0 &&\r\n\t\t\t\tparseInt(el.style.left, 10) + parseInt(xPos, 10) <=\r\n\t\t\t\t\tplaygroundWidth &&\r\n\t\t\t\tparseInt(el.style.top, 10) + parseInt(yPos, 10) >= 0 &&\r\n\t\t\t\tparseInt(el.style.top, 10) + parseInt(yPos, 10) <=\r\n\t\t\t\t\tplaygroundHeight\r\n\t\t\t) {\r\n\t\t\t\tel.style.transform =\r\n\t\t\t\t\t'translate3d(' + xPos + 'px, ' + yPos + 'px, 0)';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst Playground = React.forwardRef((props, ref) => {\r\n\treturn (\r\n\t\t<div ref={ref} className='playground-container'>\r\n\t\t\t<PlaygroundComponent {...props} />\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default Playground;\r\n","import React from 'react';\nimport swal from 'sweetalert';\nimport ImagesList from './components/ImagesList';\nimport Playground from './components/Playground';\nimport './css/main.css';\nclass Game extends React.Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\timageIsAboveDropzone: false,\n\t\t\tactiveImages: new Set(),\n\t\t\tpendingImages: new Set(),\n\t\t\tphotoSize: 200,\n\t\t\tplaygroundWidth: 760,\n\t\t\tplaygroundHeight: 300\n\t\t};\n\t\tthis.playgroundRef = React.createRef();\n\t\tthis.fileBtnRef = React.createRef();\n\t}\n\tactivateAllImages = () => {\n\t\tthis.setState(state => {\n\t\t\treturn {\n\t\t\t\tpendingImages: new Set(),\n\t\t\t\tactiveImages: new Set([\n\t\t\t\t\t...state.activeImages,\n\t\t\t\t\t...state.pendingImages\n\t\t\t\t])\n\t\t\t};\n\t\t});\n\t};\n\tuploadFileHandler = file => {\n\t\tif (file === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tif (file.size > 1048576) {\n\t\t\tswal('The image exceedes the size limit (1MB)');\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.state.activeImages.size + this.state.pendingImages.size ===\n\t\t\t10\n\t\t) {\n\t\t\tswal('The maximum amount of images is uploaded (10)');\n\t\t\treturn;\n\t\t}\n\t\tthis.setState(state => {\n\t\t\treturn {\n\t\t\t\timageIsAboveDropzone: false,\n\t\t\t\tpendingImages: state.pendingImages.add({\n\t\t\t\t\tname: file.name,\n\t\t\t\t\turl: URL.createObjectURL(file),\n\t\t\t\t\tleftOffset: Math.floor(\n\t\t\t\t\t\tMath.random() *\n\t\t\t\t\t\t\t(state.playgroundWidth - state.photoSize + 1)\n\t\t\t\t\t),\n\t\t\t\t\ttopOffset: Math.floor(\n\t\t\t\t\t\tMath.random() *\n\t\t\t\t\t\t\t(state.playgroundHeight - state.photoSize + 1)\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t};\n\t\t});\n\t};\n\tdragHandler = event => {\n\t\tevent.persist();\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\tswitch (event.type) {\n\t\t\tcase 'dragenter':\n\t\t\tcase 'dragover':\n\t\t\t\tif (event.target.matches('.upload')) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\timageIsAboveDropzone: true\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\timageIsAboveDropzone: false\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'dragleave':\n\t\t\t\tthis.setState({\n\t\t\t\t\timageIsAboveDropzone: false\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'drop':\n\t\t\t\tif (event.target.matches('.upload')) {\n\t\t\t\t\tthis.uploadFileHandler(event.dataTransfer.files[0]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t};\n\tuploadBtnHandler = event => {\n\t\tevent.persist();\n\t\tthis.uploadFileHandler(event.nativeEvent.srcElement.files['0']);\n\t};\n\tuploadClick = () => {\n\t\tthis.fileBtnRef.current.click();\n\t};\n\trender() {\n\t\treturn (\n\t\t\t<main className='main'>\n\t\t\t\t<header className='header'>\n\t\t\t\t\t<h1 className='header__title'>\n\t\t\t\t\t\tupload images\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tdrag them around on a playground\n\t\t\t\t\t</h1>\n\t\t\t\t</header>\n\t\t\t\t<div className='inner'>\n\t\t\t\t\t<div\n\t\t\t\t\t\tonDragEnter={this.dragHandler}\n\t\t\t\t\t\tonDragLeave={this.dragHandler}\n\t\t\t\t\t\tonDrop={this.dragHandler}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tthis.state.imageIsAboveDropzone\n\t\t\t\t\t\t\t\t? 'upload upload--drag-enter'\n\t\t\t\t\t\t\t\t: 'upload'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={this.uploadClick}\n\t\t\t\t\t\t\tclassName='upload__btn'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tselect an image\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<span className='upload__divider'>or</span>\n\t\t\t\t\t\t<p className='upload__drop'>drop it here</p>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='file'\n\t\t\t\t\t\t\tclassName='upload__hidden-btn'\n\t\t\t\t\t\t\taccept='image/*'\n\t\t\t\t\t\t\tonChange={this.uploadBtnHandler}\n\t\t\t\t\t\t\tref={this.fileBtnRef}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tthis.state.activeImages.size === 0\n\t\t\t\t\t\t\t\t? 'images-list-container images-list-container--pending'\n\t\t\t\t\t\t\t\t: 'images-list-container'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<header className='images-list-header'>\n\t\t\t\t\t\t\timages list\n\t\t\t\t\t\t</header>\n\t\t\t\t\t\t<ImagesList activeImages={this.state.activeImages} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tthis.state.pendingImages.size === 0\n\t\t\t\t\t\t\t? 'add-to-playground add-to-playground--pending'\n\t\t\t\t\t\t\t: 'add-to-playground'\n\t\t\t\t\t}\n\t\t\t\t\tonClick={this.activateAllImages}\n\t\t\t\t>\n\t\t\t\t\tadd {this.state.pendingImages.size}{' '}\n\t\t\t\t\t{this.state.pendingImages.size === 1 ? 'image' : 'images'}{' '}\n\t\t\t\t\tto the playground\n\t\t\t\t</button>\n\n\t\t\t\t<Playground\n\t\t\t\t\tactiveImages={this.state.activeImages}\n\t\t\t\t\tref={this.playgroundRef}\n\t\t\t\t\tplaygroundWidth={this.state.playgroundWidth}\n\t\t\t\t\tplaygroundHeight={this.state.playgroundHeight}\n\t\t\t\t/>\n\t\t\t</main>\n\t\t);\n\t}\n\tcomponentDidMount() {\n\t\tconst preventDefaultAction = event => {\n\t\t\tevent.preventDefault();\n\t\t};\n\t\twindow.addEventListener('dragenter', preventDefaultAction);\n\t\twindow.addEventListener('dragover', preventDefaultAction);\n\t\twindow.addEventListener('drop', preventDefaultAction);\n\t}\n}\n\nexport default Game;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Game from './Game';\n\nReactDOM.render(<Game />, document.getElementById('root'));\n"],"sourceRoot":""}